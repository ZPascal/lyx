# Regular expressions for tests that are known to fail
#
# Patterns will be automatically enclosed with '^' and '$'.
# Matching tests get the label "inverted"
# or (if also matching a pattern in "suspendedTests") "suspended".
# They get also the test-feature 'inverted', i.e.
# they are reported as failing if the export works without error.

# See http://www.lyx.org/trac/ticket/8823
export/examples/ja/(lilypond|sweave|knitr)_pdf

# 1.) Unknown Japanese char in section if previous
#     paragraph ended in non-Japaneese language
#     This is the same error as in export/export/ja/wrong_auto_encoding (unreliableTests)
# 2.) unknown chars üß in selected encoding in 'This is a German word: Tschüß'
export/doc/ja/EmbeddedObjects_(dvi|pdf|pdf3)
#
# The following documents likely fail because of excessive preamble code that
# is only targeted at (pdf)latex. TODO these .lyx files could be fixed. Although
# it is unlikely that a user would want to use system fonts to view LyX's
# documents, fixing these would provide further tests for LyX's handling of
# XeTeX/LuaTeX with system fonts.
#export/doc/es/Tutorial_pdf4_systemF
export/doc/gl/Tutorial_dvi3_systemF
export/doc/(nb|sk)/Intro_pdf4_systemF
#
export/examples/es/ejemplo_con_lyx_dvi3_systemF
export/examples/eu/adibide_lyx-atua_(dvi3)_systemF
export/examples/fr/ListesPuces_pdf4_systemF
export/examples/gl/exemplo_lyxificado_(dvi3)_systemF
export/templates/RJournal_(dvi3|pdf[45])_systemF
# Changes in TeX Live 2014 (see git blame for info) fixed IEEEtran-CompSoc
# pdf4_systemF but not others. TODO Investigate if others can be fixed?
export/templates/IEEEtran-(Journal|TransMag)_pdf4_systemF
#
# There is no Chinese LuaTeX or XeTeX TeX font support yet.
export/.*/zh_CN/.*(pdf[45]|dvi3)_texF
#
# These started failing after we implemented tests for formats
# that are in the complement set to the default format (7ecbb068).
# TODO it might be worth it to take a look at each individually and
# see whether they are supposed to fail or if there is something LyX
# can do to add support for exporting them.
export/doc/hu/Tutorial_dvi3_.*F
export/examples/(chessgame|chess-article|powerdot-example)_pdf[25].*
export/examples/(docbook_article)_(pdf[245]|dvi3).*
export/examples/instant_preview_(dvi3|pdf4)_systemF
export/examples/instant_preview_pdf[25].*
export/examples/listerrors_(pdf[245]).*
export/examples/(|de/|es/)tufte-(book|handout)_(dvi.*|pdf|pdf3|pdf4.*)
export/examples/fr/exemple-powerdot_pdf[25].*
export/examples/ja/(knitr|lilypond|sweave)_(dvi|pdf3)
export/examples/ko/splash_(dvi||pdf[23]?)
export/templates/DocBook_article_(dvi3_|pdf2|pdf[45]_).*
export/templates/JSS-article_(dvi|dvi3_.*|pdf3?)
export/templates/ctex_(pdf[23]?|pdf4_texF)
#
# The following exports worked with TeX Live 2013, but not in 2014.
# For a workaround, see:
# https://www.mail-archive.com/lyx-devel@lists.lyx.org/msg184435.html
export/examples/aa_sample_(dvi3|pdf4|pdf5)_(texF|systemF)
export/templates/aa_(dvi3|pdf4|pdf5)_(texF|systemF)
#
# These exports correctly fail now on TeX Live 2014. Although they compiled
# without error on TeX Live 2013, the resulting PDFs had gibberish.
export/doc/he/(Intro|Tutorial)_pdf4_texF
export/examples/he/(example_lyxified|example_raw|splash)_pdf4_texF
#

export/templates/IUCr-article_pdf4_systemF
#
# Gives the following error:
# # ! Package hpstatement Error: H or P statement "H251"
# # (hpstatement)                is not defined.
# 1580:export/examples/H-P-statements_pdf5_systemF
export/examples/H-P-statements_pdf[45]_systemF

# TODO: We need to determine the correct reason for failure (most probably
# incompatible packages) or state that we don't know it.
export/doc/de/Additional_pdf4_texF

export/examples/linguistics_(dvi3|pdf[45])_systemF
#
# GM: Missing character: There is no 砋 (U+780B) in font
#     "file:lmroman10-regular:script=latn;+trep;+tlig;"!
# Character '砋' (30731, 0x780B) is not in my list of known Unicode points,
# don't know where it comes from. On first inspection, the output looks OK.
# Explore later.
export/examples/(|es/)(europe|modern)CV_(dvi3|pdf5)_(texF|systemF)

# GM: Non-ASCII in ERT
export/doc/fr/Additional_pdf4_texF
#
# GM: language nesting error (polyglossia) (known bug)
export/doc/nb/Intro_pdf5_systemF

export/doc/sk/Intro_pdf5_systemF
export/examples/(|de/|fr/)PDF-comment_pdf5_texF
export/examples/aas_sample_(dvi3|pdf5)_(texF|systemF)

# Following mathmacros tests fail
export/mathmacros/testcases_speed_(lyx16|dvi|pdf|pdf[23]|(dvi3|pdf[45])_(texF|systemF))
check_load/mathmacros/testcases_speed

# Language nesting, document is OK, fails because of a bug in LyX
# document is still worng, did only fail because of latin language
# (problem in my TeX installation)
# export/export/languagenesting1_(pdf4_systemF|pdf5_systemF)

# But this one fails fails because of a bug in LyX
# Probably language mess
export/export/ja/wrong_auto_encoding_(dvi|pdf(|3))

Sublabel: todo

# LyX bugs and problems with the sample documents that require attention.
# (LyX bugs with a ticket number go to sublabel: bug.)

# LyX index sorting fails with ASCII (and hence also with XeTeX).
# (! >20 popup windows!)
export/doc/(es|fr)/UserGuide_pdf4_texF

# the ukrainean splash has preamble code loading russian babel
# in the preamble (Why?)
# TODO: remove the LaTeX preamble code:
# fixes the inverted tests below,
# side-effects: Ukrainean instead of Russian date, different hyphenation.
export/examples/uk/splash_(dvi3|pdf[45])_texF

# missing commands (polyglossia?)
# Explore! (works with dvi3 or language_package==babel)
export/doc/fr/UserGuide_pdf[45]_systemF

# Wrong language name for LuaTeX
# After LyX 2.1 is released, apply the patch and remove these
# See http://www.mail-archive.com/lyx-devel@lists.lyx.org/msg181595.html
# ! LuaTeX error ...e/2015/texmf-dist/tex/luatex/hyph-utf8/luatex-hyphen.lua:53: luatex-hyphen: no entry in language.dat.lua for this language: bahasa
export/doc/attic/id_UserGuide_dvi3.*
export/doc/attic/id_UserGuide_pdf5.*
export/(doc|examples)/id/.*_dvi3.*
export/(doc|examples)/id/.*_pdf5_texF

# Hungarian: Similar to the Indonesian support, see
# http://www.mail-archive.com/lyx-devel@lists.lyx.org/msg181595.html
export/.*/hu/.*(dvi3)_.*
export/.*/hu/.*(pdf5)_texF

# False positive: even with fonts that have all required characters
# (e.g. LinuxLibertine and LinuxBiolinum) polyglossia throws the error:
#  ! Package polyglossia Error: The current roman font does not contain the
#  Hebrew script!
export/examples/he/splash_pdf5_systemF

# Bug in Babel-Spanish with Xe/LuaTeX and Unicode fonts
# (Babel is required for Spanish math functions like \sen)
# add "\@ifpackageloaded{fontspec}{\unaccentedoperators}{}" to the preamble!
export/doc/es/UserGuide_.*_systemF

# Missing characters ( ͡ (U+0361), ṡ (U+1E61) in LM, use different system font?
# + language nesting problem (may disappear after completed translation)
export/doc/(de/|es/|fr/)Customization_pdf[45]_systemF

Sublabel: TeXlimit

# Export fails due to LaTeX limitations,
# e.g. non-ASCII in verbatim or listings, incompatible packages, ...
# "wontfix" if documents demonstrate correct use in the default output format.

# Non-ASCII char in in listings: "Tschüß".
# Fails with XeTeX due to limiation to ASCII (no LICR in listings possible).
export/doc/(|de/|es/|fr/)EmbeddedObjects_pdf4_systemF

# Non-ASCII char in verbatim environment.
# Fails with ASCII (and hence also with XeTeX).
export/doc/(|de/|es/|fr/)UserGuide_pdf4_texF

# chemgreek incompatible with LuaTeX and TeX fonts
export/examples/achemso_(dvi3|pdf5)_texF
# Math depends on the mhchem package which loads chemgreek
export/doc/(|de/|es/|fr/)Math_(dvi3|pdf5)_texF

# Missing characters (212B ANGSTROM SIGN, e with cedilla, ...)
# with system fonts:
export/doc/(|de/|es/|fr/)Math.*systemF

# Inside these two files, we state that they should only be expected
# to work with pdflatex and possibly lualatex.
export/examples/PDF-form_(dvi.*|pdf[^25]*)
export/examples/(|de/|fr/)PDF-comment_dvi3_.*F
export/examples/(|de/|fr/)PDF-comment_pdf5_texF

# Hebrew docs do not currently work with LuaTeX
export/.*/he/.*(pdf5|dvi3).*
# ... nor with XeTeX and 8-bit TeX fonts
# These exports correctly fail now on TeX Live 2014. Although they compiled
# without error on TeX Live 2013, the resulting PDFs had gibberish.
export/.*/he/.*pdf4_texF

# Babel-Russian uses UTF-8 for auto-strings if it detects Xe/LuaTeX.
# This fails unless the inputencoding is set to utf-8, too.
export/doc/ru/(Intro|Tutorial)_(dvi3|pdf[45])_texF
export/examples/ru/splash_(dvi3|pdf[45])_texF

# dvi3 uses Babel. Autostrings use Cyrillic LICRs,
# however these are missing in xunicode.sty. 2 solutions:
#  LuX: use polyglossia also with dvi3 (LuaTeX) and non-TeX fonts,
#  LaTeX: define Cyrillic LICRs for EU1 and EU2 (similar to greek-euenc.def)
export/doc/uk/Intro_dvi3_systemF


Sublabel: multilingual

# Without the Czech or Slovak text it compiles
# No problem with inserted German (or other foreign language) text
# No problem if the table is Slovak too
# Seems to be a problem with Check and Slovak Babel support. File a bug there.
export/export/TableErrorIfSlovakTextInserted_(dvi|pdf|pdf[23]|pdf[45]_texF|dvi3_.*F)


Sublabel: attic

# Documents in the attic.
# Kept for reference and format conversion test.
# However, most problems here are "wontfix".

# Fails because of missing .png graphic files.
# They were replaced by .svgz, but, as this file is in the attic, we do not
# convert to new lyx format. latex creates output (and ignores missing files)
# while (pdf|lua|xe)latex exits with != 0
export/doc/attic/eu_UserGuide_pdf.*

# Files in the attic with non-default output
# (i.e. could be ERT, package incompatiblity, ...)
export/doc/attic/it_(Customization_pdf5|UserGuide_dvi3|UserGuide_pdf4)_systemF
export/doc/attic/sk_UserGuide_pdf4_texF
export/doc/attic/id_UserGuide_pdf[45]_systemF
