# Regular expressions for test combinations known to fail permanently
# or to be irrelevant
#
# Patterns will be automatically enclosed with '^' and '$'.
# Combinations matching these patterns will be skipped
# by the cmake test configuration.


# ================================================
Sublabel: problematic
# Documents that cause problems for the test suite
# ================================================

# problems exporting to lyx16x
export/examples/Modules/Noweb_lyx16
export/examples/Modules/Noweb2LyX_lyx16

# Tests created for lyx2lyx-tests only
!export/export/lyx2lyx/lyx_.*_test_lyx[12][1236]
.*/export/lyx2lyx/lyx_.*_test.*

# Ignore MergedManuals_xhtml because the test is very time-consuming
# and the underlying subdocuments are already tested
# Ignore MergedManuals_lyx2[2-9] too
# due to following xhtml export of converted file
export/doc/(ja/|)MergedManuals_(xhtml|lyx2[2-9])


# ===========================================
Sublabel: special
# Documents that do not work with all exports
# ===========================================

# XeTeX with TeX-fonts works only for input encodings "utf8" and "ascii".
# special test cases for XeTeX with 8-bit fonts (ignore matches in this file):
!export/.*(utf8|ascii)_pdf4_texF
!export/examples/(|ar|ca|cs|da|de|el|es|eu|fa|fr|gl|he|hu|id|it|ko|nb|nl|pl|pt|pt_BR|pt_PT|ro|ru|sk|sl|sr|sv|uk|zh_CN)/Welcome_pdf4_texF
# Documentation and templates use "auto" 8-bit encodings.
.*_pdf4_texF
export/(doc|examples|templates)/(|ar|ca|cs|da|de|el|es|eu|fa|fr|gl|he|hu|id|it|ja|ko|nb|nl|pl|pt|pt_BR|pt_PT|ro|ru|sk|sl|sr|sv|uk|zh_CN)/.*pdf4_texF

# Inside these two files, we state that they should only be expected
# to work with pdflatex and possibly lualatex.
export/examples/Modules/PDF_Form_(dvi.*|pdf[^25]*)
export/examples/(|de/|fr/)Modules/PDF_Comments_dvi3_.*F
export/examples/(|de/|fr/)Modules/PDF_Comments_pdf5_texF

# Seems, like only latex and pdflatex compilations work
#! Missing number, treated as zero.
# in copernicus.cls:199
# \ifnum\pdfoutput=\z@
export/templates/Articles/Copernicus_.*(dvi3|pdf4|pdf5)_(texF|systemF)

# Document uses Postscript specials
# Does not compile with pdflatex or non-TeX fonts (see note in the document source).
export/examples/Graphics_and_Insets/Instant_Preview_pdf[25].*
export/examples/Graphics_and_Insets/Instant_Preview_(dvi3|pdf4)_systemF

export/examples/Articles/Chess/Game_2_pdf[25].*
export/examples/(|fr/)Presentations/Powerdot_pdf[25].*
export/examples/Modules/Chessboard_(lyx(16|20|21|22|23)|(pdf3|pdf5|dvi3)_texF)

# jss.cls (not on CTAN)
# "All documents need to be processed by pdflatex" [jss.pdf]
export/templates/Articles/Journal_of_Statistical_Software_.*(dvi|dvi3_.*|pdf3?)

# CJK fails with LuaTeX or XeTeX and 8-bit fonts:
export/examples/ja/Multilingual_Typesetting_.*_texF
export/.*/ko/.*texF
export/.*/zh_CN/.*texF
export/export/latex/CJK/zh_CN-toc_.*_texF

# Japanese knitr.lyx and sweave.lyx support only XeLaTeX with system fonts
# because they use the "bxjsarticle" class.
# The "!" means the following:
#   "Protect these tests from being matched by future patterns in this file".
!export/examples/ja/Modules/Rnw.*knitr.*_(lyx.*|xhtml|pdf4_systemF)
export/examples/ja/Modules/Rnw.*knitr.*
!export/examples/ja/Modules/Sweave.*_(lyx.*|xhtml|pdf4_systemF)
export/examples/ja/Modules/Sweave.*
#
# Other Japanese documents use language "japanese" wich is tied to "platex"
# (automatically invoked instead of "latex" to create a DVI file).
# Export by other engines works with language "japanese-cjk", e.g.
!export/examples/ja/Multilingual_Typesetting_.*CJK.*
# For a discussion of alternatives for Japanese with LaTeX , see also
# http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-1-introduction/
export/.*/ja/.*_(pdf[245]|dvi3).*
# the unicodesymbols-tests use pdflatex, too:
export/export/latex/unicodesymbols/.*-platex_pdf2

# export of minted documents to 2.2.x is not guaranteed to work (and currently
# fails for our two minted example files), as explained here:
# https://www.mail-archive.com/search?l=mid&q=20190113085555.GA7928%40GIOVE
export/examples/Insets/Minted.*lyx22


# Subdocuments that are not expected to work as stand-alone documents:
export/mathmacros/Spacechild[123].*
# chapters of Springer books (svmono, svmult) (except 00_Main_File)
export/templates/Books/Springer_.*/(0[^0]|1.)_.*
check_load/templates/Books/Springer_.*/(0[^0]|1.)_.*
export/templates/Theses/PhD_Thesis/(Acknowledgments|Appendix|Summary|Bibliography|Chapter_[12])_lyx.*
# Used only as include file for some tests
.*/export/IncludeMissingEndTagDiv.*

# Bibliography.lyx is not expected to compile. See the following for discussion:
#   https://www.mail-archive.com/search?l=mid&q=20190104195414.opgeuggeqakxl2fo%40barna
# Ignore all formats except xhtml export
export/templates/Theses/PhD_Thesis/Bibliography_[^x].*

# Document class "Docbook article (SGML)" does not work with LaTeX:
export/examples/Articles/DocBook_Article_.*(dvi3|pdf[245]).*
export/templates/Articles/DocBook_Article_.*(dvi3|pdf[245]).*

# `acmart` and `copernicus` are not supported by LyX < 2.3
export/templates/Articles/Association_for_Computing_Machinery.*_lyx(16|20|21|22)
export/templates/Articles/Copernicus_Publications_.*_lyx(16|20|21|22)


# ============================================================
Sublabel: obsolete
# Documents relying on no longer available packages or classes
# ============================================================

# aastex.cls is obsoleted by aastex6.cls
export/attic/doc/aastex6_sample_(dvi|pdf|lyx(16|20|21|22|23)).*
check_load/attic/doc/aastex6_sample

# aastex6.cls is obsoleted by aastex62.cls
export/attic/examples/Articles/American_Astronomical_Society_.*v._6%29.*
check_load/attic/examples/Articles/American_Astronomical_Society_.*v._6%29
export/templates/Obsolete/American_Astronomical_Society_.*v._6%29.*
check_load/templates/Obsolete/American_Astronomical_Society_.*v._6%29
export/examples/Articles/American_Astronomical_Society_.*v._6.2.*_lyx16
export/templates/Articles/American_Astronomical_Society_.*v._6.2.*_lyx16

# latex8.sty is obsoleted by IEEEconf
export/templates/Obsolete/latex8_(dvi|pdf|lyx2[23]).*

# ==============================================================
Sublabel: irrelevant
# Dedicated test samples that don't need testing in all variants
# ==============================================================

# Dedicated test samples for LaTeX:
# 
# don't check loading, lyx2lyx, or export to other LyX versions or HTML
check_load/export/latex/.*
lyx2lyx/export/latex/.*
export/export/latex/.*(lyx..|xhtml)
